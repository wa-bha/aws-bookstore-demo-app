{"ast":null,"code":"import _regeneratorRuntime from\"/home/bw/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/bw/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/bw/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/bw/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/bw/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/bw/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{API}from\"aws-amplify\";import BestSellerProductRow from\"./BestSellerProductRow\";import{CategoryNavBar}from\"../category/categoryNavBar/CategoryNavBar\";import{SearchBar}from\"../search/searchBar/SearchBar\";var BestSellers=/*#__PURE__*/function(_React$Component){_inherits(BestSellers,_React$Component);var _super=_createSuper(BestSellers);function BestSellers(props){var _this;_classCallCheck(this,BestSellers);_this=_super.call(this,props);_this.state={isLoading:true,books:[]};return _this;}_createClass(BestSellers,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var books,bestSellers,i,hit;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;books=[];_context.next=4;return API.get(\"bestsellers\",\"/bestsellers\",null);case 4:bestSellers=_context.sent;// Map the elasticache results to a book object\nfor(i=0;i<bestSellers.length;i++){hit=JSON.parse(bestSellers[i]);books.push({bookId:hit});}this.setState({books:books,isLoading:false});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);alert(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,this,[[0,9]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"Category\"},/*#__PURE__*/React.createElement(SearchBar,null),/*#__PURE__*/React.createElement(CategoryNavBar,null),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"well-bs no-radius\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container-category\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Top 20 best sellers\")),this.state.isLoading?/*#__PURE__*/React.createElement(\"div\",{className:\"loader\"}):this.state.books.slice(0,20).map(function(book){return/*#__PURE__*/React.createElement(BestSellerProductRow,{bookId:book.bookId,key:book.bookId});}))));}}]);return BestSellers;}(React.Component);export{BestSellers as default};","map":{"version":3,"sources":["/home/bw/Desktop/aws-bookstore-demo-app/assets/src/modules/bestSellers/BestSellers.tsx"],"names":["React","API","BestSellerProductRow","CategoryNavBar","SearchBar","BestSellers","props","state","isLoading","books","get","bestSellers","i","length","hit","JSON","parse","push","bookId","setState","alert","slice","map","book","Component"],"mappings":"28BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,GAAT,KAAoB,aAApB,CAEA,MAAOC,CAAAA,oBAAP,KAAiC,wBAAjC,CACA,OAASC,cAAT,KAA+B,2CAA/B,CACA,OAASC,SAAT,KAA0B,+BAA1B,C,GASqBC,CAAAA,W,sHACnB,qBAAYC,KAAZ,CAAqC,6CACnC,uBAAMA,KAAN,EAEA,MAAKC,KAAL,CAAa,CACXC,SAAS,CAAE,IADA,CAEXC,KAAK,CAAE,EAFI,CAAb,CAHmC,aAOpC,C,mJAED,+KAEUA,KAFV,CAEkB,EAFlB,uBAG8BR,CAAAA,GAAG,CAACS,GAAJ,CAAQ,aAAR,CAAuB,cAAvB,CAAuC,IAAvC,CAH9B,QAGUC,WAHV,eAKI;AACA,IAASC,CAAT,CAAa,CAAb,CAAgBA,CAAC,CAAGD,WAAW,CAACE,MAAhC,CAAwCD,CAAC,EAAzC,CAA6C,CACvCE,GADuC,CACjCC,IAAI,CAACC,KAAL,CAAWL,WAAW,CAACC,CAAD,CAAtB,CADiC,CAE3CH,KAAK,CAACQ,IAAN,CAAW,CAAEC,MAAM,CAAEJ,GAAV,CAAX,EACD,CACD,KAAKK,QAAL,CAAc,CACZV,KAAK,CAAEA,KADK,CAEZD,SAAS,CAAE,KAFC,CAAd,EAVJ,+EAeIY,KAAK,aAAL,CAfJ,oE,mIAmBA,iBAAS,CACP,mBACE,2BAAK,SAAS,CAAC,UAAf,eACE,oBAAC,SAAD,MADF,cAEE,oBAAC,cAAD,MAFF,cAGE,4CACE,2BAAK,SAAS,CAAC,mBAAf,eACE,2BAAK,SAAS,CAAC,oBAAf,eACE,oDADF,CADF,CAIG,KAAKb,KAAL,CAAWC,SAAX,cAAuB,2BAAK,SAAS,CAAC,QAAf,EAAvB,CACC,KAAKD,KAAL,CAAWE,KAAX,CAAiBY,KAAjB,CAAuB,CAAvB,CAAyB,EAAzB,EAA6BC,GAA7B,CAAiC,SAAAC,IAAI,qBAAI,oBAAC,oBAAD,EAAsB,MAAM,CAAEA,IAAI,CAACL,MAAnC,CAA2C,GAAG,CAAEK,IAAI,CAACL,MAArD,EAAJ,EAArC,CALJ,CADF,CAHF,CADF,CAgBD,C,yBA9CsClB,KAAK,CAACwB,S,SAA1BnB,W","sourcesContent":["import React from \"react\";\nimport { API } from \"aws-amplify\";\n\nimport BestSellerProductRow from \"./BestSellerProductRow\";\nimport { CategoryNavBar } from \"../category/categoryNavBar/CategoryNavBar\";\nimport { SearchBar } from \"../search/searchBar/SearchBar\";\n\ninterface BestSellersProps {}\n\ninterface BestSellersState {\n  isLoading: boolean;\n  books: { bookId: any; }[];\n}\n\nexport default class BestSellers extends React.Component<BestSellersProps, BestSellersState> {\n  constructor(props: BestSellersProps) {\n    super(props);\n\n    this.state = {\n      isLoading: true,\n      books: []\n    };\n  }\n\n  async componentDidMount() {\n    try {\n      const books = [];\n      const bestSellers = await API.get(\"bestsellers\", \"/bestsellers\", null);\n      \n      // Map the elasticache results to a book object\n      for (var i = 0; i < bestSellers.length; i++) {\n        var hit = JSON.parse(bestSellers[i]);\n        books.push({ bookId: hit });\n      }\n      this.setState({\n        books: books,\n        isLoading: false\n      });\n    } catch(error) {\n      alert(error);\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"Category\">\n        <SearchBar />\n        <CategoryNavBar />\n        <div>\n          <div className=\"well-bs no-radius\">\n            <div className=\"container-category\">\n              <h3>Top 20 best sellers</h3>\n            </div>\n            {this.state.isLoading ? <div className=\"loader\" /> :\n              this.state.books.slice(0,20).map(book => <BestSellerProductRow bookId={book.bookId} key={book.bookId} />\n            )}  \n          </div>\n        </div>\n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}