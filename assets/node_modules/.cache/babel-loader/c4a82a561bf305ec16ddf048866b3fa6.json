{"ast":null,"code":"import _regeneratorRuntime from\"/home/bw/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/bw/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/bw/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/bw/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/bw/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/bw/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{API}from'aws-amplify';import React from'react';import{FriendThumb}from'./FriendThumb';var FriendRecommendations=/*#__PURE__*/function(_React$Component){_inherits(FriendRecommendations,_React$Component);var _super=_createSuper(FriendRecommendations);function FriendRecommendations(props){var _this;_classCallCheck(this,FriendRecommendations);_this=_super.call(this,props);_this.getFriends=function(){return API.get(\"recommendations\",\"/recommendations/\".concat(_this.props.bookId),null);};_this.state={friends:[]};return _this;}_createClass(FriendRecommendations,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var friends;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return this.getFriends();case 3:friends=_context.sent;this.setState({friends:friends});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);alert(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,this,[[0,7]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){// No recommendations to show\nif(!(this.state.friends[0]&&this.state.friends[0].friendsPurchased&&this.state.friends[0].friendsPurchased.length>0)){return/*#__PURE__*/React.createElement(\"div\",{className:\"no-friends-padding\"});}var numFriendsPurchased=this.state.friends[0].friendsPurchased.length;var friends=this.state.friends[0].friendsPurchased;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Friends who bought this book\"),/*#__PURE__*/React.createElement(\"p\",null,friends.slice(0,3).map(function(friend){return/*#__PURE__*/React.createElement(FriendThumb,{key:friend});}),numFriendsPurchased>3&&/*#__PURE__*/React.createElement(\"span\",{className:\"orange\"},\" +\".concat(numFriendsPurchased-3,\" \").concat(numFriendsPurchased-3>1?\"others\":\"other\"))));}}]);return FriendRecommendations;}(React.Component);export default FriendRecommendations;","map":{"version":3,"sources":["/home/bw/Desktop/aws-bookstore-demo-app/assets/src/common/friendRecommendations/FriendRecommendations.tsx"],"names":["API","React","FriendThumb","FriendRecommendations","props","getFriends","get","bookId","state","friends","setState","alert","friendsPurchased","length","numFriendsPurchased","slice","map","friend","Component"],"mappings":"28BAAA,OAASA,GAAT,KAAoB,aAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,eAA5B,C,GAUMC,CAAAA,qB,0IACJ,+BAAYC,KAAZ,CAA+C,uDAC7C,uBAAMA,KAAN,EAD6C,MAQ/CC,UAR+C,CAQlC,UAAM,CACjB,MAAOL,CAAAA,GAAG,CAACM,GAAJ,CAAQ,iBAAR,4BAA+C,MAAKF,KAAL,CAAWG,MAA1D,EAAoE,IAApE,CAAP,CACD,CAV8C,CAG7C,MAAKC,KAAL,CAAa,CACXC,OAAO,CAAE,EADE,CAAb,CAH6C,aAM9C,C,6JAMD,qLAE0B,MAAKJ,UAAL,EAF1B,QAEUI,OAFV,eAGI,KAAKC,QAAL,CAAc,CAAED,OAAO,CAAPA,OAAF,CAAd,EAHJ,+EAKIE,KAAK,aAAL,CALJ,oE,mIASA,iBAAS,CACP;AACA,GAAI,EAAE,KAAKH,KAAL,CAAWC,OAAX,CAAmB,CAAnB,GAAyB,KAAKD,KAAL,CAAWC,OAAX,CAAmB,CAAnB,EAAsBG,gBAA/C,EAAmE,KAAKJ,KAAL,CAAWC,OAAX,CAAmB,CAAnB,EAAsBG,gBAAtB,CAAuCC,MAAvC,CAAgD,CAArH,CAAJ,CAA6H,CAC3H,mBAAO,2BAAK,SAAS,CAAC,oBAAf,EAAP,CACD,CAED,GAAMC,CAAAA,mBAAmB,CAAG,KAAKN,KAAL,CAAWC,OAAX,CAAmB,CAAnB,EAAsBG,gBAAtB,CAAuCC,MAAnE,CACA,GAAMJ,CAAAA,OAAO,CAAG,KAAKD,KAAL,CAAWC,OAAX,CAAmB,CAAnB,EAAsBG,gBAAtC,CACA,mBACE,4CACE,8DADF,cAEE,6BACGH,OAAO,CAACM,KAAR,CAAc,CAAd,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,SAACC,MAAD,qBAAiB,oBAAC,WAAD,EAAa,GAAG,CAAEA,MAAlB,EAAjB,EAAxB,CADH,CAEGH,mBAAmB,CAAG,CAAtB,eAA2B,4BAAM,SAAS,CAAC,QAAhB,cAA+BA,mBAAmB,CAAG,CAArD,aAA2DA,mBAAmB,CAAG,CAAvB,CAA4B,CAA5B,CAAgC,QAAhC,CAA2C,OAArG,EAF9B,CAFF,CADF,CASD,C,mCAvCiCb,KAAK,CAACiB,S,EA0C1C,cAAef,CAAAA,qBAAf","sourcesContent":["import { API } from 'aws-amplify';\nimport React from 'react';\nimport { FriendThumb } from './FriendThumb';\n\ninterface FriendRecommendationsProps {\n  bookId: string;\n}\n\ninterface FriendRecommendationsState {\n  friends: any[];\n}\n\nclass FriendRecommendations extends React.Component<FriendRecommendationsProps, FriendRecommendationsState> {\n  constructor(props: FriendRecommendationsProps) {\n    super(props);\n\n    this.state = {\n      friends: []\n    };\n  }\n\n  getFriends = () => {\n    return API.get(\"recommendations\", `/recommendations/${this.props.bookId}`, null);\n  }\n\n  async componentDidMount() {\n    try {\n      const friends = await this.getFriends();\n      this.setState({ friends });\n    } catch (e) {\n      alert(e);\n    }\n  }\n\n  render() {\n    // No recommendations to show\n    if (!(this.state.friends[0] && this.state.friends[0].friendsPurchased && this.state.friends[0].friendsPurchased.length > 0)) {\n      return <div className=\"no-friends-padding\" />\n    }\n    \n    const numFriendsPurchased = this.state.friends[0].friendsPurchased.length;\n    const friends = this.state.friends[0].friendsPurchased;\n    return (\n      <div>\n        <div>Friends who bought this book</div>\n        <p>\n          {friends.slice(0, 3).map((friend: any) => <FriendThumb key={friend} />)}\n          {numFriendsPurchased > 3 && <span className=\"orange\">{` +${numFriendsPurchased - 3} ${(numFriendsPurchased - 3) > 1 ? \"others\" : \"other\"}`}</span>}\n        </p>\n      </div>\n    );\n  }\n}\n\nexport default FriendRecommendations;"]},"metadata":{},"sourceType":"module"}